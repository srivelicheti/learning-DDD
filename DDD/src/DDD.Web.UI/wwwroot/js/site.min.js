define(function(){"use strict";return{apiBaseUrl:"http://localhost:54441"}}),define(["appConfig","jquery","bootstrap","knockout","jqueryValidate","jqueryValUnob","signalr","komapping","kovalidation","postal","pager","select2"],function(e,t,i,o,s,n,r,a,l,u){"use strict";t(function(){window.ko=o,window.komap=a,t.getScript(e.apiBaseUrl+"/signalr/hubs"),t.support.cors=!0,t.connection.hub.url=e.apiBaseUrl;var i=t.hubConnection(t.connection.hub.url),s=i.createHubProxy("notifications");s.on("messageReceived",function(e){u.publish({channel:"alerts",topic:"notification-alert",data:{title:"Info!",message:e,type:"info",dismissAfter:3e3}})}),i.logging=!0,i.start(),o.validation.init({registerExtenders:!0,messagesOnModified:!0,insertMessages:!0,parseInputAttributes:!0,messageTemplate:null},!0),o.components.register("alert",{require:"components/ko-alerts/alert"}),o.components.register("alerts",{require:"components/ko-alerts/alerts"}),o.components.register("popupalert",{require:"components/ko-popupalerts/popupalert"}),o.components.register("popupalerts",{require:"components/ko-popupalerts/popupalerts"}),o.components.register("contractorsearch",{require:"components/ko-contractorsearch/contractorsearch"}),window.postal=u})}),require.config({baseUrl:"/js",paths:{appConfig:"/js/app.config",jquery:"../lib/jquery/dist/jquery",knockout:"../lib/knockoutjs/dist/knockout",bootstrap:"../lib/bootstrap/dist/js/bootstrap",jqueryValidate:"../lib/jquery-validation/dist/jquery.validate",jqueryValUnob:"../lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive",signalr:"../lib/signalr/jquery.signalR",q:"../lib/q/q",appMain:"../js/commonScripts",lodash:"../lib/lodash/lodash",komapping:"../lib/bower-knockout-mapping/dist/knockout.mapping",kovalidation:"../lib/knockout-validation/dist/knockout.validation",postal:"../lib/postal.js/lib/postal",text:"../lib/requirejs-plugins/lib/text",pager:"../lib/pagerjs/dist/pager.min",select2:"../lib/select2/dist/js/select2"},shim:{jquery:{exports:"$"},bootstrap:{deps:["jquery"]},jqueryValidate:{deps:["jquery"]},jqueryValUnob:{deps:["jquery","jqueryValidate"]},signalr:{deps:["jquery"]},q:{exports:"q"},lodash:{exports:"_"},knockout:{exports:"ko"},komapping:{deps:["knockout"],exports:"mapping"},kovalidation:{deps:["knockout"]},pager:{deps:["knockout","jquery"]},select2:{deps:["jquery"],exports:"$.fn.select2"}}});var someConfig={test:"test"};require(["jquery","knockout","lodash","models/AddContractorViewModel","postal","appMain"],function(e,t,i,o,s){"use strict";e(function(){var e=new o,i={ContractorName:"TestCont",EinNumber:"789415789",DoingBusinessAs:"TC",ContractStartDate:"07/26/2016",ContractEndDate:"07/25/2019",Type:"C",AddressLine1:"200 Sterling Pkwy",AddressLine2:null,City:"Mechanicsburg",StateCode:"DE",ZipCode:17050,ZipExtension:null,PhoneNumber:"7145698852",AlternatePhoneNumber:null,Email:"TC@TC.com",ContactFirstName:"ContactLN",ContactLastName:"ContactFN",ContactPhoneNumber:"7418529632",ContactAlternatePhoneNumber:null,ContactEmail:null};t.applyBindings(e);for(var s in i){var n=i[s];e[s](n)}window.CVM=e})}),define(["knockout","lodash","models/BaseViewModel","services/contractorService"],function(e,t,i,o){"use strict";var s=function(){this.ContractorName.extend({required:!0}),this.EinNumber.extend({minLength:9,maxLength:9,required:!0}),this.errors=e.validation.group(this),this.ContractorExistsWithSameEin.extend({validation:{validator:function(e,t){return e===!0?t===!0:!0},params:this.AddDuplicateContractorOverride,Message:"Please check the Add duplicate contractor box if you are adding an existing contractor"}})},n=function(){var t=this;this.ContractorName=null,this.EinNumber=null,this.DoingBusinessAs=null,this.ContractStartDate=null,this.ContractEndDate=null,this.Type=null,this.AddressLine1=null,this.AddressLine2=null,this.City=null,this.StateCode=null,this.ZipCode=null,this.ZipExtension=null,this.PhoneNumber=null,this.AlternatePhoneNumber=null,this.Email=null,this.ContactFirstName=null,this.ContactLastName=null,this.ContactPhoneNumber=null,this.ContactAlternatePhoneNumber=null,this.ContactEmail=null,this.ContractorExistsWithSameEin=!1,this.AddDuplicateContractorOverride=!1,i.call(this,arguments),s.call(this),this.IsInValidState=e.computed(function(){return 0===this.errors().length},this),this.EinNumber.subscribe(function(){t.CheckForExistingContractor()})};return n.prototype.AddContractor=function(){if(0===this.errors().length){var t=o.AddNewContractor(e.mapping.toJSON(this));console.log(t);t.then(function(e){postal.publish({channel:"popupalerts",topic:"popup-alert",data:{title:"Alert!",messages:["Command to add Contractor accepted! "+e],type:"success",canBeClosed:!0}})},function(){postal.publish({channel:"popupalerts",topic:"popup-alert",data:{title:"Alert!",messages:["Command to add Contractor Failed!"],type:"danger",canBeClosed:!0}})})}},n.prototype.CheckForExistingContractor=function(){var e=this,t=o.IsExistingContractor(this.EinNumber());t.then(function(t){e.ContractorExistsWithSameEin(t?!0:!1)})},t.extend(n.prototype,i.prototype,{initialize:function(){}}),n}),define(["knockout","lodash","models/AddressViewModel","models/ContactDetailViewModel","models/BaseViewModel","services/siteService","services/contractorService","pager"],function(e,t,i,o,s,n,r,a){"use strict";function l(t,i){this.holidayName=e.observable(t).extend({required:!0}),this.holidayDate=e.observable(i).extend({required:!0})}function u(t,i,o){this.minAge=e.observable(t).extend({required:!0}),this.maxAge=e.observable(i).extend({required:!0}),this.rate=e.observable(o).extend({required:!0})}function c(t,i,o,s,n,r,a,l,u,c,d,h){this.SiteNumber=e.observable(t).extend({required:!0}),this.SiteName=e.observable(i).extend({required:!0}),this.ContractorEin=e.observable(o).extend({required:!0}),this.ContractStartDate=e.observable(s).extend({required:!0}),this.ContractEndDate=e.observable(n),this.SiteType=e.observable(r),this.SiteFacilityType=e.observable(a),this.Address=l,this.CountyServed=e.observable(u),this.PhoneNumber=e.observable(c),this.SiteEmail=e.observable(d),this.ContactDetail=h,this.ExistingContractor=e.observable(!1),p.call(this),this.errors=e.validation.group(this),this.IsInValidState=e.computed(function(){return 0===this.errors().length},this);var m=this;this.ContractorEin.subscribe(function(){m.CheckForExistingContractor()})}var p=function(){this.ExistingContractor.extend({validation:{validator:function(e){return e},Message:"Please add to existing contractor"}})};c.prototype.CheckForExistingContractor=function(){var e=this,t=r.IsExistingContractor(this.EinNumber());t.then(function(t){e.ExistingContractor(t?!0:!1)})};var d=new i("300 Sterling Pkwy","","Mechanicsburg","PA","DP",17051,""),h={SiteDetails:new c("7892549","Boys N Girls of Wilming","123456789","2016-08-31","2019-08-31","ON","17",d,"CS","714-459-1234","siteemail@email.com",new o("LN","FN","717-456-7894","test@gmail.com")),SiteHolidays:e.observableArray([new l("TNG","11/25/2016"),new l("X-Mas","12/25/2016")]),SiteRates:e.observableArray([new u(0,2,60),new u(3,18,30)]),AddSiteHoliday:function(e,t){t=""|t,e=""|e,this.SiteHolidays.push(new l(e,t))},AddSiteRate:function(e,t,i){e=""|e,t=""|t,i=""|i,this.SiteRates.push(new u(e,t,i))},AddSite:function(){n.addSite(e.mapping.toJS({SiteDetails:this.SiteDetails,SiteHolidays:this.SiteHolidays,SiteRates:this.SiteRates}))}};return window.SVM=h,h}),define(["knockout","lodash","models/BaseViewModel"],function(e,t,i){"use strict";var o=function(t,i,o,s,n,r,a){this.AddressLine1=e.observable(t),this.AddressLine2=e.observable(i),this.City=e.observable(o),this.StateCode=e.observable(s),this.County=e.observable(n),this.PhoneNumber=e.observable(""),this.Email=e.observable(""),this.ZipCode=e.observable(r),this.ZipExtension=e.observable(a)};return t.extend(o.prototype,i.prototype,{initialize:function(){}}),o}),define(["lodash","knockout"],function(e,t){"use strict";var i=function(e){this._setup(e),this.initialize.call(this,e)};return e.extend(i.prototype,{initialize:function(){},_setup:function(i){var o;i=i||{};for(o in this)this.hasOwnProperty(o)&&(this[o]=i[o]?e.isArray(i[o])?t.observableArray(i[o]):t.observable(i[o]):e.isArray(this[o])?t.observableArray(this[o]):t.observable(this[o]))}}),i}),define(["knockout","lodash","models/BaseViewModel"],function(e,t,i){"use strict";var o=function(e,t,i,o){this.LastName=e,this.FirstName=t,this.PhoneNumber=i,this.Email=o};return t.extend(o.prototype,i.prototype,{initialize:function(){}}),o}),define(["jquery","knockout","q","appConfig","postal","appMain"],function(e,t,i,o,s){"use strict";var n=function(t){var s=i.defer(),n=o.apiBaseUrl+"/api/Contractor/"+t+"/exists";return e.ajax({url:n,method:"GET"}).done(function(e,t,i){200===i.status?s.resolve(!0):404===i.status?s.resolve(!1):s.reject()}).fail(function(e,t,i){404===e.status?s.resolve(!1):s.reject()}),s.promise},r=function(t){var s=i.defer(),n=o.apiBaseUrl+"/api/Contractor/";return e.ajax({url:n,method:"POST",dataType:"json",contentType:"application/json",data:t}).done(function(e,t,i){200===i.status?s.resolve(e.commandId):s.reject()}).fail(function(e){s.reject()}),s.promise};return{IsExistingContractor:n,AddNewContractor:r}}),define(["jquery","knockout","q","appConfig","postal","appMain"],function(e,t,i,o,s){"use strict";var n=function(t){console.log("To implelment add site service"),console.log(t);var s=o.apiBaseUrl+"/api/Site",n=t.SiteDetails,r=t.SiteDetails.Address,a=t.SiteDetails.ContactDetail,l={SiteName:n.SiteName,SiteNumber:n.SiteNumber,SiteTypeCode:n.SiteType,SiteFacitlityTypeCode:parseInt(n.SiteFacilityType),LicensingStatusCode:"X",ContractStartDate:n.ContractStartDate,ContractEndDate:n.ContractEndDate,LicenceNumber:n.LicenceNumber,AddressLine1:r.AddressLine1,AddressLine2:r.AddressLine2,City:r.City,StateCode:r.StateCode,CountyCode:r.County,ZipCode:r.ZipCode,ZipExtenson:r.ZipExtenson,PhoneNumber:n.PhoneNumber,CountyServed:n.CountyServed,SiteEmailText:n.SiteEmail,ContactFirstName:a.FirstName,ContactLastName:a.LastName,ContactPhoneNumber:a.PhoneNumber,ContactEmailText:a.Email,SiteHolidays:t.SiteHolidays,SiteRates:t.SiteRates};return i(e.ajax({url:s,method:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(l)}))};return{addSite:n}}),define(["knockout","lodash","postal","models/BaseViewModel"],function(e,t){"use strict";function i(t){var i=t.alert;this.title=i.title,this.message=i.message,this.dismissible="undefined"!=typeof i.dismissible?i.dismissible:!0,this.classes={"alert-dismissible":this.dismissible},this.type=i.type||"info",this.classes["alert-"+i.type]=!0,this.visible=e.observable(!0),this.onClose=t.onClose||this.onClose;i.dismissAfter}return i.prototype.onClose=function(e,t){this.visible(!1)},i.prototype.isDismissible=function(e,t){return e.dismissible},{template:{require:"text!components/ko-alerts/alert.html"},viewModel:i}}),define(["knockout","components/ko-alerts/alert","postal"],function(e,t,i){"use strict";function o(t){this.alerts=void 0===t.alerts?e.observableArray():t.alerts;var o=i.channel("alerts"),s=this;o.subscribe("notification-alert",function(e){s.alerts.push(e)})}return e.components.isRegistered("alert")||e.components.register("alert",t),o.prototype.onClose=function(t){var i=e.unwrap(this.alerts);i.splice(i.indexOf(t),1),this.alerts(i)},{template:{require:"text!components/ko-alerts/alerts.html"},viewModel:o}}),define(["jquery","knockout","lodash","postal"],function(e,t,i,o){"use strict";function s(i){this.selectedEin=t.observable(null|i),this.elementId=++n,e("#"+this.elemntId).select2()}var n=0;return{template:{require:"text!components/ko-contractorSearch/contractorSearch.html"},viewModel:s}}),define(["knockout","lodash","jquery"],function(e,t,i){"use strict";function o(t){var o=t.alert||{};this.title=e.observable(o.title),this.messages=e.observableArray(o.messages),this.type=o.alertType,this.showCloseButton=o.canBeClosed,this.elementId="popupAlert"+ ++s,this.buttons=o.buttons;var n=this;this.componentLoaded=function(){i("#"+n.elementId).on("hidden.bs.modal",function(){i("#"+n.elementId).remove()}).modal("show")},this.btnClick=function(e){if(e.action.call(e.scope),e.closeDialog){var t=i("#"+n.elementId);t.modal("hide")}}}var s=0;return{template:{require:"text!components/ko-popupalerts/popupalert.html"},viewModel:o}}),define(["knockout","jquery","components/ko-popupalerts/popupalert","postal"],function(e,t,i,o){"use strict";function s(t){var i=t||{};i.alerts=i.alerts||e.observableArray(),this.alerts=i.alerts,this.containerId="alertsContainer_"+ ++n;var s=this,r=o.channel("popupalerts");r.subscribe("popup-alert",function(e){s.alerts.push(e)})}e.components.isRegistered("popupalert")||e.components.register("popupalert",i);var n=0;return s.prototype.onClose=function(t){var i=e.unwrap(this.alerts);i.splice(i.indexOf(t),1),this.alerts(i)},{template:{require:"text!components/ko-popupalerts/popupalerts.html"},viewModel:s}});